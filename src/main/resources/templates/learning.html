<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${course.title + ' - Learning'}">Course Learning</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --primary: #3b82f6; --primary-dark: #1e40af; --secondary: #8b5cf6; --text: #1f2937; --text-light: #6b7280; --bg: #f9fafb; --border: #e5e7eb; --success: #10b981; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: var(--bg); color: var(--text); }
        
        header { background: white; border-bottom: 1px solid var(--border); padding: 1rem 0; position: sticky; top: 0; z-index: 100; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 1rem; }
        .nav-wrapper { display: flex; justify-content: space-between; align-items: center; }
        .nav-brand { font-size: 1.5rem; font-weight: 700; color: var(--primary); text-decoration: none; }
        nav { display: flex; gap: 2rem; }
        nav a { text-decoration: none; color: var(--text); font-weight: 500; }
        .nav-auth { display: flex; gap: 1rem; align-items: center; }
        
        .btn { padding: 0.5rem 1rem; border: none; border-radius: 0.5rem; cursor: pointer; text-decoration: none; display: inline-block; font-size: 0.9rem; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-secondary { background: var(--secondary); color: white; }
        .btn-success { background: var(--success); color: white; }
        .btn-danger { background: #ef4444; color: white; }
        .btn-sm { padding: 0.25rem 0.75rem; font-size: 0.8rem; }
        
        .main { max-width: 1000px; margin: 2rem auto; padding: 0 1rem; }
        .course-header { margin-bottom: 2rem; }
        .course-title { font-size: 2rem; margin-bottom: 0.5rem; color: var(--primary-dark); }
        .course-desc { color: var(--text-light); font-size: 1.1rem; }
        
        .accordion-item { background: white; border: 1px solid var(--border); margin-bottom: 1rem; border-radius: 0.75rem; overflow: hidden; box-shadow: 0 1px 2px rgba(0,0,0,0.05); }
        .accordion-header { background: #fff; padding: 1.25rem; cursor: pointer; font-weight: 600; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid transparent; transition: background 0.2s; }
        .accordion-header:hover { background: #f9fafb; }
        .accordion-header.active { border-bottom-color: var(--border); background: #f3f4f6; }
        .accordion-content { padding: 1.5rem; display: none; }
        .accordion-content.active { display: block; }
        
        .section-title { font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-light); margin: 1rem 0 0.5rem 0; font-weight: 700; }
        .section-title:first-child { margin-top: 0; }
        
        .content-item { display: flex; justify-content: space-between; align-items: center; padding: 0.75rem; border: 1px solid var(--border); border-radius: 0.5rem; margin-bottom: 0.5rem; background: #fafafa; }
        .content-item:last-child { margin-bottom: 0; }
        .content-info { display: flex; align-items: center; gap: 0.75rem; }
        .content-icon { width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; border-radius: 50%; background: #e0e7ff; color: var(--primary); font-size: 0.8rem; }
        
        .empty-state { padding: 2rem; text-align: center; color: var(--text-light); background: #f9fafb; border-radius: 0.5rem; }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="nav-wrapper">
                <a href="/" class="nav-brand" th:text="#{nav.brand}">DSA Learning Platform</a>
                <nav>
                    <a href="/" th:text="#{nav.home}">Home</a>
                    <a href="/courses" th:text="#{nav.courses}">Courses</a>
                    <a href="/my-courses" th:text="#{nav.myCourses}">My Courses</a>
                </nav>
                <div class="nav-auth">
                    <span th:text="${user.fullName}" th:if="${user}"></span>
                    <a href="/logout" class="btn btn-danger" th:text="#{nav.logout}" th:if="${user}">Logout</a>
                </div>
            </div>
        </div>
    </header>

    <main class="main">
        <div class="course-header">
            <h1 class="course-title" th:text="${course.title}">Course Title</h1>
            <p class="course-desc" th:text="${course.description}">Course Description</p>
        </div>

        <div th:if="${#lists.isEmpty(course.sessions)}" class="empty-state">
            <p>No content available for this course yet.</p>
        </div>

        <div th:each="courseSession : ${course.sessions}" class="accordion-item">
            <div class="accordion-header">
                <span th:text="${courseSession.title}">Session Title</span>
                <span class="toggle-icon">‚ñº</span>
            </div>
            <div class="accordion-content">
                <p th:if="${courseSession.description}" th:text="${courseSession.description}" style="margin-bottom: 1rem; color: var(--text-light); font-style: italic;"></p>
                
                <!-- Videos -->
                <div th:if="${not #lists.isEmpty(courseSession.videos)}">
                    <div class="section-title">Videos</div>
                    <div th:each="video : ${courseSession.videos}" class="content-item">
                        <div class="content-info">
                            <span class="content-icon">üé•</span>
                            <div>
                                <div th:text="${video.title}" style="font-weight: 500;">Video Title</div>
                                <div th:text="${(video.duration != null ? video.duration : 0) + ' seconds'}" style="font-size: 0.8rem; color: var(--text-light);">Duration</div>
                            </div>
                        </div>
                        <a th:href="${video.videoUrl}" target="_blank" class="btn btn-sm btn-primary">Watch</a>
                    </div>
                </div>

                <!-- Quizzes -->
                <div th:if="${not #lists.isEmpty(courseSession.quizzes)}">
                    <div class="section-title">Quizzes</div>
                    <div th:each="quiz : ${courseSession.quizzes}" class="content-item">
                        <div class="content-info">
                            <span class="content-icon">‚ùì</span>
                            <span th:text="${quiz.title}" style="font-weight: 500;">Quiz Title</span>
                        </div>
                        <button class="btn btn-sm btn-secondary" disabled title="Coming soon">Take Quiz</button>
                    </div>
                </div>

                <!-- Assignments -->
                <div th:if="${not #lists.isEmpty(courseSession.assignments)}">
                    <div class="section-title">Assignments</div>
                    <div th:each="assignment : ${courseSession.assignments}" class="content-item">
                        <div class="content-info">
                            <span class="content-icon">üìù</span>
                            <span th:text="${assignment.title}" style="font-weight: 500;">Assignment Title</span>
                        </div>
                        <a th:href="@{/submit(courseId=${course.courseId})}" class="btn btn-sm btn-success">Submit Code</a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        document.querySelectorAll('.accordion-header').forEach(header => {
            header.addEventListener('click', () => {
                header.classList.toggle('active');
                const content = header.nextElementSibling;
                content.classList.toggle('active');
                const icon = header.querySelector('.toggle-icon');
                icon.textContent = header.classList.contains('active') ? '‚ñ≤' : '‚ñº';
            });
        });
    </script>
</body>
</html>