<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Khóa học đã mua</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --primary: #3b82f6; --text: #1f2937; --text-light: #6b7280; --bg: #f9fafb; --border: #e5e7eb; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: var(--bg); color: var(--text); }
        .main { max-width: 1000px; margin: 2rem auto; padding: 0 1rem; }
        .card { background: white; border-radius: 0.75rem; padding: 1.5rem; border: 1px solid var(--border); }
        h1 { font-size: 1.75rem; margin-bottom: 1rem; }
        p { color: var(--text-light); }
    </style>
</head>
<body>
    <div class="main">
        <a href="/" style="text-decoration:none; color: var(--primary);">&larr; Trang chủ</a>
        <div class="card" style="margin-top: 1rem;">
            <h1>Khóa học đã mua</h1>

            <div th:if="${message}" style="background-color: #d1fae5; color: #065f46; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1rem;">
                <span th:text="${message}"></span>
            </div>
            
            <div th:if="${enrollments == null || enrollments.isEmpty()}">
                <p>Bạn chưa mua khóa học nào.</p>
                <a href="/courses" style="display:inline-block; margin-top:1rem; padding:0.5rem 1rem; background:var(--primary); color:white; border-radius:0.5rem; text-decoration:none;">Khám phá khóa học</a>
            </div>

            <div th:if="${enrollments != null && !enrollments.isEmpty()}" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem; margin-top: 1rem;">
                <div th:each="enrollment : ${enrollments}" style="border: 1px solid var(--border); border-radius: 0.5rem; padding: 1rem;">
                    <h3 th:text="${enrollment.course.title}" style="color: var(--primary); margin-bottom: 0.5rem;">Course Title</h3>
                    <p th:text="${enrollment.course.description}" style="color: var(--text-light); font-size: 0.9rem; margin-bottom: 1rem; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">Course description...</p>
                    
                    <div style="margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; font-size: 0.85rem; margin-bottom: 0.25rem;">
                            <span>Tiến độ</span>
                            <span th:text="${enrollment.progress + '%'}">0%</span>
                        </div>
                        <div style="background: var(--border); height: 8px; border-radius: 4px; overflow: hidden;">
                            <div th:style="'width: ' + ${enrollment.progress} + '%; background: var(--primary); height: 100%;'"></div>
                        </div>
                    </div>

                    <a th:href="@{'/submit?courseId=' + ${enrollment.course.courseId}}" style="display: block; text-align: center; background: var(--primary); color: white; padding: 0.5rem; border-radius: 0.5rem; text-decoration: none;">Vào học</a>
                </div>
            </div>
        </div>
    </div>
</body>
</html>

